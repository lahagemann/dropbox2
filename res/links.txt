https://www.reddit.com/r/C_Programming/comments/3uic8r/issue_making_a_multithreaded_server_application/